# 0.2.4 Node Registration Protocol

## Overview

This document defines the process by which new nodes join the Hypernet. The registration process ensures that only legitimate, capable nodes participate while maintaining the network's decentralized nature.

## Registration Flow

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  Generate   │────►│  Submit     │────►│  Verify     │────►│  Activate   │
│  Identity   │     │  Application│     │  Capability │     │  Node       │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
```

## Step 1: Identity Generation

### Create Cryptographic Identity
```bash
# Generate node keypair
hypernet-cli node generate-identity --type [storage|processing|cerberus]
```

This creates:
- Ed25519 signing keypair
- X25519 encryption keypair
- Node ID (hash of public keys)
- Node certificate signing request

### Identity Structure
```yaml
node_identity:
  node_id: "[256-bit identifier]"
  node_type: "storage|processing|cerberus"
  public_signing_key: "[Ed25519 public key]"
  public_encryption_key: "[X25519 public key]"
  operator_mandala: "[Operator's Mandala ID]"
  hardware_attestation: "[TPM attestation if available]"
```

## Step 2: Application Submission

### Application Data
```yaml
registration_application:
  node_identity: "[Node identity object]"
  operator_info:
    mandala_id: "[Operator Mandala]"
    organization: "[Organization object link, if applicable]"
    contact_methods: ["encrypted channels"]

  node_capabilities:
    node_type: "storage"
    storage_capacity_gb: 10000
    bandwidth_mbps: 1000
    geographic_location: "US-WEST"
    availability_commitment: "99.9%"

  infrastructure:
    hosting_type: "dedicated|cloud|personal"
    provider: "[If cloud, provider name]"
    security_measures: ["list of implemented measures"]

  commitment:
    minimum_duration_months: 12
    stake_amount: "[If applicable]"
    terms_accepted: true
    terms_version: "1.0"
```

### Submission
```bash
hypernet-cli node register --application application.yaml --region US-WEST
```

## Step 3: Capability Verification

### Automated Tests
The network performs automated verification:

#### Storage Nodes
- [ ] Bandwidth test (upload/download speed)
- [ ] Storage capacity verification
- [ ] Latency measurements to regional peers
- [ ] Encryption capability test
- [ ] Uptime monitoring probe setup

#### Processing Nodes
- [ ] CPU benchmark suite
- [ ] Memory capacity verification
- [ ] Query execution tests
- [ ] VR rendering capability (if claimed)
- [ ] Concurrent connection handling

#### Cerberus Nodes
- [ ] Cryptographic operation benchmarks
- [ ] Consensus participation test
- [ ] Geographic independence verification
- [ ] Security audit requirements
- [ ] Operator background verification

### Human Review (Cerberus Nodes Only)
Cerberus node applications require additional human review:
- Operator identity verification
- Infrastructure security audit
- Commitment verification
- Community vouching (3+ existing Cerberus operators)

## Step 4: Activation

### Probationary Period
All new nodes enter a 30-day probationary period:
- Reduced task assignment
- Enhanced monitoring
- Quick removal if issues detected
- No governance participation

### Full Activation
After successful probation:
```yaml
activation_record:
  node_id: "[Node ID]"
  activation_date: "2025-01-30T00:00:00Z"
  probation_end: "2025-03-01T00:00:00Z"
  initial_reputation: 0.3
  assigned_cluster: "[Cluster ID]"
  capabilities_verified: ["storage", "replication", ...]
```

## Ongoing Requirements

### Health Checks
- Heartbeat every 30 seconds
- Capability re-verification monthly
- Security updates within 72 hours of release

### Reputation Maintenance
- Uptime above commitment
- Successful operation rate > 99%
- No security incidents
- Community feedback positive

## Deregistration

### Voluntary Exit
```bash
hypernet-cli node deregister --graceful --migration-period 30d
```

Graceful exit includes:
- Data migration to other nodes
- Stake return (after migration)
- Reputation preserved for re-entry

### Involuntary Removal
Nodes may be removed for:
- Extended downtime (> 7 days)
- Security violations
- Malicious behavior
- Capability degradation

## Related Documents

- 0.2.0 Node Architecture Overview
- 0.2.5 Node Health Monitoring
- 0.3.3 Reputation System
- 0.8.0 Security Architecture Overview
