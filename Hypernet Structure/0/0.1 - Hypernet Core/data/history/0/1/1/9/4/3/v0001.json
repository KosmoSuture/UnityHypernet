{
  "version": 1,
  "content_hash": "a84b9043fa6cc1b4",
  "snapshot_at": "2026-02-17T01:21:58.499633+00:00",
  "node": {
    "address": "0.1.1.9.4.3",
    "type_address": null,
    "data": {
      "name": "base.py",
      "type": "file",
      "extension": ".py",
      "path": "C:\\Hypernet\\Hypernet Structure\\0\\0.1 - Hypernet Core\\0.1.1 - Core System\\app\\models\\base.py",
      "size": 4351,
      "content": "\"\"\"\nBase Object Model\n\nAbstract base class that all Hypernet objects inherit from.\nImplements the BaseObject specification from 0.0.1.\n\"\"\"\n\nfrom sqlalchemy import Column, String, DateTime, ForeignKey, func\nfrom sqlalchemy.dialects.postgresql import UUID, JSONB\nfrom sqlalchemy.ext.declarative import declared_attr\nfrom app.core.database import Base\nimport uuid\nfrom datetime import datetime\n\n\nclass BaseObject(Base):\n    \"\"\"\n    Universal parent class for all Hypernet objects.\n\n    Implements the canonical BaseObject specification from:\n    0.0 - Object Type Registry / 0.0.1 - Core Types / BaseObject.md\n\n    All objects in Hypernet inherit these fields and behaviors.\n    \"\"\"\n\n    __abstract__ = True  # This class is not instantiated directly\n\n    # ============================================================================\n    # IDENTITY\n    # ============================================================================\n\n    id = Column(\n        UUID(as_uuid=True),\n        primary_key=True,\n        default=uuid.uuid4,\n        nullable=False,\n        doc=\"Globally unique identifier (UUID v4)\"\n    )\n\n    # ============================================================================\n    # OWNERSHIP\n    # ============================================================================\n\n    # Note: user_id is NOT on BaseObject itself for User model\n    # (users don't own themselves). Child classes add this as needed.\n\n    # ============================================================================\n    # TIMESTAMPS\n    # ============================================================================\n\n    created_at = Column(\n        DateTime(timezone=True),\n        nullable=False,\n        server_default=func.now(),\n        doc=\"When this object was created (UTC)\"\n    )\n\n    updated_at = Column(\n        DateTime(timezone=True),\n        nullable=False,\n        server_default=func.now(),\n        onupdate=func.now(),\n        doc=\"When this object was last modified (UTC)\"\n    )\n\n    deleted_at = Column(\n        DateTime(timezone=True),\n        nullable=True,\n        index=True,\n        doc=\"When this object was soft-deleted (NULL = not deleted)\"\n    )\n\n    # ============================================================================\n    # SOURCE TRACKING\n    # ============================================================================\n\n    source_type = Column(\n        String(50),\n        nullable=True,\n        index=True,\n        doc=\"Where this object came from (upload, integration, api, import, ai_generated)\"\n    )\n\n    source_id = Column(\n        String(255),\n        nullable=True,\n        index=True,\n        doc=\"External identifier at the source (e.g., 'instagram:12345')\"\n    )\n\n    # ============================================================================\n    # EXTENSIBILITY\n    # ============================================================================\n\n    metadata = Column(\n        JSONB,\n        nullable=False,\n        default={},\n        server_default='{}',\n        doc=\"Extensible JSON field for type-specific data\"\n    )\n\n    # ============================================================================\n    # BEHAVIORS\n    # ============================================================================\n\n    def soft_delete(self):\n        \"\"\"Soft delete this object (sets deleted_at to current time)\"\"\"\n        self.deleted_at = datetime.utcnow()\n\n    def restore(self):\n        \"\"\"Restore a soft-deleted object (sets deleted_at to NULL)\"\"\"\n        self.deleted_at = None\n\n    @property\n    def is_deleted(self):\n        \"\"\"Check if object is soft-deleted\"\"\"\n        return self.deleted_at is not None\n\n    def __repr__(self):\n        return f\"<{self.__class__.__name__}(id={self.id})>\"\n\n\nclass OwnedObject(BaseObject):\n    \"\"\"\n    Base class for objects that have an owner (user_id).\n\n    Most objects inherit from this, except User itself.\n    \"\"\"\n\n    __abstract__ = True\n\n    @declared_attr\n    def user_id(cls):\n        return Column(\n            UUID(as_uuid=True),\n            ForeignKey(\"users.id\", ondelete=\"CASCADE\"),\n            nullable=False,\n            index=True,\n            doc=\"Owner of this object (human or AI account)\"\n        )\n"
    },
    "created_at": "2026-02-17T01:20:04.979055+00:00",
    "updated_at": "2026-02-17T01:20:04.979055+00:00",
    "deleted_at": null,
    "source_type": "import",
    "source_id": "file:base.py"
  }
}