{
  "address": "0.4.0.0.1.6",
  "type_address": null,
  "data": {
    "name": "Integration.md",
    "type": "file",
    "extension": ".md",
    "path": "C:\\Hypernet\\Hypernet Structure\\0\\0.4 - Object Type Registry\\0.0.1 - Core Types\\Integration.md",
    "size": 3924,
    "content": "# Integration - External Service Connection\n\n**Type ID:** `hypernet.core.integration`\n**Version:** 1.0\n**Category:** 0.0.1 - Core Types\n**Parent:** BaseObject\n**Status:** Active\n**Created:** 2026-02-04\n\n---\n\n## Identity\n\n```yaml\ntype_name: \"Integration\"\ntype_id: \"hypernet.core.integration\"\nversion: \"1.0\"\nparent_type: \"BaseObject\"\ncategory: \"0.0.1 - Core Types\"\n```\n\n---\n\n## Purpose\n\n### What\nConnections to external services (Instagram, Google Photos, Gmail, etc.).\n\n### Why\n- Central to data unification vision\n- OAuth2 token management\n- Sync state tracking\n- Source attribution for imported data\n\n### When to Use\n- User connects Instagram account\n- Syncing Google Photos\n- Importing emails from Gmail\n- Any external data source\n\n---\n\n## Required Fields\n\n```yaml\nintegration_type: String(50)\n  - \"instagram\", \"google_photos\", \"gmail\", \"dropbox\", etc.\n  - Indexed for filtering\n\nintegration_name: String(200)\n  - User-friendly name\n  - Example: \"My Instagram\", \"Work Gmail\"\n\nstatus: Enum\n  - \"pending\" (OAuth in progress)\n  - \"connected\" (active and working)\n  - \"disconnected\" (user disconnected)\n  - \"error\" (auth failed or expired)\n```\n\n---\n\n## Optional Fields\n\n```yaml\n# OAuth2\ntoken_expires_at: DateTime\n  - When access token expires\n  - Null if token doesn't expire\n\n# Sync State\nlast_sync_at: DateTime\nlast_sync_status: Enum\n  - \"success\", \"partial\", \"failed\"\n\nsync_cursor: Text\n  - Pagination cursor for incremental sync\n  - Platform-specific format\n\nitems_synced: Integer\n  - Count of items imported\n  - Increments with each sync\n\n# Status\nis_enabled: Boolean\n  - User can disable without deleting\n```\n\n---\n\n## Metadata Schema\n\n```json\n{\n  \"instagram\": {\n    \"username\": \"user123\",\n    \"user_id\": \"17841405793187218\",\n    \"profile_url\": \"https://instagram.com/user123\"\n  },\n  \"google\": {\n    \"email\": \"user@gmail.com\",\n    \"scope\": [\"photos\", \"drive\"]\n  },\n  \"sync_config\": {\n    \"auto_sync\": true,\n    \"sync_interval\": \"hourly\",\n    \"import_likes\": true\n  },\n  \"statistics\": {\n    \"total_photos\": 1543,\n    \"total_videos\": 87,\n    \"last_error\": null\n  }\n}\n```\n\n---\n\n## Relationships\n\n```yaml\nOutgoing:\n  - None (integrations are sources, not targets)\n\nIncoming:\n  - source: All media types (Photo, Video, etc.)\n    - \"Photo --source--> Integration\"\n  - owns: User (user_id FK)\n```\n\n---\n\n## Validation\n\n```sql\nCHECK (status IN ('pending', 'connected', 'disconnected', 'error'))\nCHECK (last_sync_status IS NULL OR last_sync_status IN ('success', 'partial', 'failed'))\nCHECK (items_synced >= 0)\n\nINDEX ON (user_id, integration_type)\nINDEX ON (status, is_enabled)\n```\n\n---\n\n## API Endpoints\n\n```http\n# OAuth Flow\nGET /api/v1/integrations/oauth/start?type=instagram\n  \u2192 Redirects to Instagram OAuth\nGET /api/v1/integrations/oauth/callback?code=...\n  \u2192 Completes OAuth, creates Integration\n\n# Management\nGET /api/v1/integrations (list user's integrations)\nGET /api/v1/integrations/{id}\nPATCH /api/v1/integrations/{id} (update settings)\nDELETE /api/v1/integrations/{id} (disconnect)\n\n# Sync\nPOST /api/v1/integrations/{id}/sync (trigger sync)\nGET /api/v1/integrations/{id}/sync-status\n```\n\n---\n\n## OAuth2 Flow\n\n```yaml\n1. User clicks \"Connect Instagram\"\n2. GET /integrations/oauth/start?type=instagram\n3. Backend redirects to Instagram OAuth\n4. User authorizes on Instagram\n5. Instagram redirects to callback with code\n6. Backend exchanges code for access_token\n7. Creates Integration record (status=connected)\n8. Stores access_token in IntegrationSecret table\n9. Triggers initial sync\n```\n\n---\n\n## Security\n\n```yaml\n# Tokens stored separately in IntegrationSecret table\n# Never returned via API\n# Encrypted at rest\n# Rotated automatically when possible\n```\n\n---\n\n**Status:** Active - Phase 1 Priority\n**Version:** 1.0\n"
  },
  "created_at": "2026-02-15T11:54:04.649633+00:00",
  "updated_at": "2026-02-15T11:54:04.649633+00:00",
  "deleted_at": null,
  "source_type": "import",
  "source_id": "file:Integration.md"
}