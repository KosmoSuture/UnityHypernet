{
  "address": "0.1.2.3.0.1.0.5.3.1",
  "type_address": null,
  "data": {
    "name": "node.json",
    "type": "file",
    "extension": ".json",
    "path": "C:\\Hypernet\\Hypernet Structure\\0\\0.1 - Hypernet Core\\data\\nodes\\0\\1\\0\\5\\3\\node.json",
    "size": 26651,
    "content": "{\n  \"address\": \"0.1.0.5.3\",\n  \"type_address\": null,\n  \"data\": {\n    \"name\": \"03-API-Endpoints.md\",\n    \"type\": \"file\",\n    \"extension\": \".md\",\n    \"path\": \"C:\\\\Hypernet\\\\Hypernet Structure\\\\0\\\\0.1 - Hypernet Core\\\\0.1.0 - Planning & Documentation\\\\API-Design\\\\03-API-Endpoints.md\",\n    \"size\": 25178,\n    \"content\": \"# Hypernet Core - API Endpoints Specification\\n\\n**Version:** 0.1.0 (Phase 1)\\n**Last Updated:** 2026-02-03\\n**Status:** Design Phase\\n**Base URL:** `https://{server}:8443/api/v1`\\n\\n---\\n\\n## Table of Contents\\n\\n1. [Overview](#overview)\\n2. [Authentication](#authentication)\\n3. [Common Patterns](#common-patterns)\\n4. [Auth Endpoints](#auth-endpoints)\\n5. [User Endpoints](#user-endpoints)\\n6. [Media Endpoints](#media-endpoints)\\n7. [Album Endpoints](#album-endpoints)\\n8. [Integration Endpoints](#integration-endpoints)\\n9. [Link Endpoints](#link-endpoints)\\n10. [System Endpoints](#system-endpoints)\\n11. [Error Responses](#error-responses)\\n\\n---\\n\\n## Overview\\n\\n### API Design Principles\\n\\n1. **RESTful** - Resources identified by URLs, operations via HTTP methods\\n2. **Versioned** - `/api/v1/...` allows future breaking changes in v2\\n3. **JSON** - All request/response bodies in JSON (except file uploads)\\n4. **Stateless** - JWT tokens, no server-side sessions\\n5. **Paginated** - Large result sets use cursor or offset pagination\\n6. **Filterable** - Common filters: `?type=photo&date_from=2026-01-01`\\n7. **Sortable** - `?sort_by=created_at&sort_order=desc`\\n8. **HATEOAS** - Responses include links to related resources (optional Phase 2)\\n\\n### HTTP Methods\\n\\n| Method | Purpose | Idempotent | Safe |\\n|--------|---------|------------|------|\\n| `GET` | Retrieve resource(s) | Yes | Yes |\\n| `POST` | Create new resource | No | No |\\n| `PUT` | Replace entire resource | Yes | No |\\n| `PATCH` | Update partial resource | No | No |\\n| `DELETE` | Delete resource | Yes | No |\\n\\n### Status Codes\\n\\n| Code | Meaning | When Used |\\n|------|---------|-----------|\\n| `200 OK` | Success | GET, PATCH, PUT successful |\\n| `201 Created` | Resource created | POST successful |\\n| `204 No Content` | Success, no body | DELETE successful |\\n| `400 Bad Request` | Invalid input | Validation failed |\\n| `401 Unauthorized` | Not authenticated | Missing/invalid token |\\n| `403 Forbidden` | Not authorized | Authenticated but no permission |\\n| `404 Not Found` | Resource doesn't exist | ID not found |\\n| `409 Conflict` | Duplicate/constraint violation | Unique constraint failed |\\n| `422 Unprocessable Entity` | Semantic error | Business logic failed |\\n| `429 Too Many Requests` | Rate limited | Exceeded rate limit |\\n| `500 Internal Server Error` | Server error | Unexpected error |\\n\\n---\\n\\n## Authentication\\n\\n### JWT Bearer Tokens\\n\\nAll authenticated endpoints require:\\n```http\\nAuthorization: Bearer {access_token}\\n```\\n\\n### Token Structure\\n\\n**Access Token:**\\n- Short-lived (15 minutes)\\n- Contains: `user_id`, `email`, `is_admin`, `exp`, `iat`\\n- Used for API requests\\n\\n**Refresh Token:**\\n- Long-lived (30 days)\\n- Used only to get new access tokens\\n- Stored securely by client (httpOnly cookie or secure storage)\\n\\n---\\n\\n## Common Patterns\\n\\n### Pagination\\n\\n**Offset-Based (Default):**\\n```http\\nGET /api/v1/media?limit=50&offset=0\\n```\\n\\n**Response:**\\n```json\\n{\\n  \\\"items\\\": [...],\\n  \\\"total\\\": 250,\\n  \\\"limit\\\": 50,\\n  \\\"offset\\\": 0,\\n  \\\"has_more\\\": true\\n}\\n```\\n\\n**Cursor-Based (for large datasets):**\\n```http\\nGET /api/v1/media?limit=50&cursor=abc123xyz\\n```\\n\\n**Response:**\\n```json\\n{\\n  \\\"items\\\": [...],\\n  \\\"next_cursor\\\": \\\"def456uvw\\\",\\n  \\\"has_more\\\": true\\n}\\n```\\n\\n### Filtering\\n\\n```http\\nGET /api/v1/media?type=photo&date_from=2026-01-01&date_to=2026-01-31\\n```\\n\\n**Common Filters:**\\n- `type` - Object type or media type\\n- `date_from`, `date_to` - Date range (ISO 8601)\\n- `search` - Full-text search (filename, description)\\n- `tag` - Filter by tag (Phase 2)\\n\\n### Sorting\\n\\n```http\\nGET /api/v1/media?sort_by=taken_at&sort_order=desc\\n```\\n\\n**Common Sort Fields:**\\n- `created_at` - When object was created\\n- `updated_at` - When object was last modified\\n- `taken_at` - When photo/video was taken (media only)\\n- `name` - Alphabetical (albums)\\n- `size` - File size (media)\\n\\n### Partial Responses (Future)\\n\\n```http\\nGET /api/v1/media/123?fields=id,filename,size\\n```\\n\\nOnly returns requested fields (reduces bandwidth).\\n\\n---\\n\\n## Auth Endpoints\\n\\n### Register\\n\\nCreate new user account.\\n\\n```http\\nPOST /api/v1/auth/register\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"email\\\": \\\"user@example.com\\\",\\n  \\\"password\\\": \\\"SecurePassword123!\\\",\\n  \\\"display_name\\\": \\\"John Smith\\\"\\n}\\n```\\n\\n**Validation:**\\n- `email`: Valid email format, unique, max 255 chars\\n- `password`: Min 12 chars, must include uppercase, lowercase, number, special char\\n- `display_name`: Optional, max 100 chars\\n\\n**Response (201 Created):**\\n```json\\n{\\n  \\\"user\\\": {\\n    \\\"id\\\": \\\"user-uuid\\\",\\n    \\\"email\\\": \\\"user@example.com\\\",\\n    \\\"display_name\\\": \\\"John Smith\\\",\\n    \\\"email_verified\\\": false,\\n    \\\"created_at\\\": \\\"2026-02-03T12:00:00Z\\\"\\n  },\\n  \\\"access_token\\\": \\\"eyJ...\\\",\\n  \\\"refresh_token\\\": \\\"eyJ...\\\",\\n  \\\"token_type\\\": \\\"Bearer\\\",\\n  \\\"expires_in\\\": 900\\n}\\n```\\n\\n**Errors:**\\n- `409 Conflict` - Email already registered\\n- `400 Bad Request` - Invalid email or password format\\n\\n---\\n\\n### Login\\n\\nAuthenticate user and get tokens.\\n\\n```http\\nPOST /api/v1/auth/login\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"email\\\": \\\"user@example.com\\\",\\n  \\\"password\\\": \\\"SecurePassword123!\\\"\\n}\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"user\\\": {\\n    \\\"id\\\": \\\"user-uuid\\\",\\n    \\\"email\\\": \\\"user@example.com\\\",\\n    \\\"display_name\\\": \\\"John Smith\\\"\\n  },\\n  \\\"access_token\\\": \\\"eyJ...\\\",\\n  \\\"refresh_token\\\": \\\"eyJ...\\\",\\n  \\\"token_type\\\": \\\"Bearer\\\",\\n  \\\"expires_in\\\": 900\\n}\\n```\\n\\n**Errors:**\\n- `401 Unauthorized` - Invalid email or password\\n- `403 Forbidden` - Account disabled\\n\\n---\\n\\n### Refresh Token\\n\\nGet new access token using refresh token.\\n\\n```http\\nPOST /api/v1/auth/refresh\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"refresh_token\\\": \\\"eyJ...\\\"\\n}\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"access_token\\\": \\\"eyJ...\\\",\\n  \\\"token_type\\\": \\\"Bearer\\\",\\n  \\\"expires_in\\\": 900\\n}\\n```\\n\\n**Errors:**\\n- `401 Unauthorized` - Invalid or expired refresh token\\n\\n---\\n\\n### Logout\\n\\nInvalidate refresh token (revoke access).\\n\\n```http\\nPOST /api/v1/auth/logout\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"refresh_token\\\": \\\"eyJ...\\\"\\n}\\n```\\n\\n**Response (204 No Content)**\\n\\n---\\n\\n## User Endpoints\\n\\n### Get Current User\\n\\nGet authenticated user's profile.\\n\\n```http\\nGET /api/v1/users/me\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"id\\\": \\\"user-uuid\\\",\\n  \\\"email\\\": \\\"user@example.com\\\",\\n  \\\"display_name\\\": \\\"John Smith\\\",\\n  \\\"avatar_url\\\": null,\\n  \\\"email_verified\\\": true,\\n  \\\"is_active\\\": true,\\n  \\\"is_admin\\\": false,\\n  \\\"created_at\\\": \\\"2026-01-01T00:00:00Z\\\",\\n  \\\"last_login_at\\\": \\\"2026-02-03T12:00:00Z\\\",\\n  \\\"storage_used\\\": 15728640000,\\n  \\\"storage_quota\\\": 107374182400,\\n  \\\"metadata\\\": {}\\n}\\n```\\n\\n---\\n\\n### Update User Profile\\n\\nUpdate authenticated user's profile.\\n\\n```http\\nPATCH /api/v1/users/me\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"display_name\\\": \\\"John A. Smith\\\",\\n  \\\"avatar_url\\\": \\\"https://example.com/avatar.jpg\\\",\\n  \\\"metadata\\\": {\\n    \\\"timezone\\\": \\\"America/Los_Angeles\\\",\\n    \\\"language\\\": \\\"en-US\\\"\\n  }\\n}\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"id\\\": \\\"user-uuid\\\",\\n  \\\"display_name\\\": \\\"John A. Smith\\\",\\n  \\\"avatar_url\\\": \\\"https://example.com/avatar.jpg\\\",\\n  ...\\n}\\n```\\n\\n---\\n\\n### Change Password\\n\\nChange authenticated user's password.\\n\\n```http\\nPOST /api/v1/users/me/change-password\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"current_password\\\": \\\"OldPassword123!\\\",\\n  \\\"new_password\\\": \\\"NewPassword456!\\\"\\n}\\n```\\n\\n**Response (204 No Content)**\\n\\n**Errors:**\\n- `401 Unauthorized` - Current password incorrect\\n- `400 Bad Request` - New password doesn't meet requirements\\n\\n---\\n\\n## Media Endpoints\\n\\n### Upload Media\\n\\nUpload photo, video, or file.\\n\\n```http\\nPOST /api/v1/media/upload\\nAuthorization: Bearer {access_token}\\nContent-Type: multipart/form-data\\n```\\n\\n**Request:**\\n```\\nfile: (binary data)\\ndescription: \\\"Optional description\\\"\\ntags: [\\\"vacation\\\", \\\"beach\\\"]\\n```\\n\\n**Processing Steps:**\\n1. Validate file type and size\\n2. Scan for malware (ClamAV)\\n3. Generate unique ID (UUID)\\n4. Extract EXIF metadata\\n5. Calculate hash (SHA-256)\\n6. Save to `/media/{user_id}/media/{year}/{month}/{id}.{ext}`\\n7. Generate thumbnails (async)\\n8. Insert into database\\n9. Return media object\\n\\n**Response (201 Created):**\\n```json\\n{\\n  \\\"id\\\": \\\"media-uuid\\\",\\n  \\\"type\\\": \\\"media\\\",\\n  \\\"filename\\\": \\\"photo.jpg\\\",\\n  \\\"media_type\\\": \\\"photo\\\",\\n  \\\"mime_type\\\": \\\"image/jpeg\\\",\\n  \\\"size\\\": 2457600,\\n  \\\"width\\\": 4032,\\n  \\\"height\\\": 3024,\\n  \\\"file_path\\\": \\\"users/.../media/2026/02/media-uuid.jpg\\\",\\n  \\\"hash\\\": \\\"9f86d081...\\\",\\n  \\\"taken_at\\\": \\\"2026-02-01T14:23:45Z\\\",\\n  \\\"processing_status\\\": \\\"processing\\\",\\n  \\\"thumbnail_generated\\\": false,\\n  \\\"created_at\\\": \\\"2026-02-03T12:00:00Z\\\",\\n  \\\"metadata\\\": {\\n    \\\"exif\\\": {...},\\n    \\\"tags\\\": [\\\"vacation\\\", \\\"beach\\\"],\\n    \\\"description\\\": \\\"Optional description\\\"\\n  }\\n}\\n```\\n\\n**Errors:**\\n- `400 Bad Request` - Invalid file type or size\\n- `413 Payload Too Large` - File exceeds size limit\\n- `422 Unprocessable Entity` - Malware detected\\n- `507 Insufficient Storage` - User quota exceeded\\n\\n---\\n\\n### List Media\\n\\nList user's media with filtering and pagination.\\n\\n```http\\nGET /api/v1/media?type=photo&limit=50&offset=0&sort_by=taken_at&sort_order=desc\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Query Parameters:**\\n- `type` - Media type: `photo`, `video`, `document`, `other`\\n- `date_from`, `date_to` - Taken date range (ISO 8601)\\n- `search` - Search filename or description\\n- `limit` - Items per page (default: 50, max: 100)\\n- `offset` - Pagination offset (default: 0)\\n- `sort_by` - Sort field: `taken_at`, `created_at`, `filename`, `size`\\n- `sort_order` - Sort direction: `asc`, `desc` (default)\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"items\\\": [\\n    {\\n      \\\"id\\\": \\\"media-1-uuid\\\",\\n      \\\"filename\\\": \\\"beach.jpg\\\",\\n      \\\"media_type\\\": \\\"photo\\\",\\n      \\\"taken_at\\\": \\\"2026-02-01T14:00:00Z\\\",\\n      \\\"thumbnail_url\\\": \\\"/api/v1/media/media-1-uuid/thumbnail/medium\\\",\\n      ...\\n    },\\n    {\\n      \\\"id\\\": \\\"media-2-uuid\\\",\\n      \\\"filename\\\": \\\"sunset.jpg\\\",\\n      ...\\n    }\\n  ],\\n  \\\"total\\\": 250,\\n  \\\"limit\\\": 50,\\n  \\\"offset\\\": 0,\\n  \\\"has_more\\\": true\\n}\\n```\\n\\n---\\n\\n### Get Media\\n\\nGet single media object by ID.\\n\\n```http\\nGET /api/v1/media/{media_id}\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"id\\\": \\\"media-uuid\\\",\\n  \\\"type\\\": \\\"media\\\",\\n  \\\"filename\\\": \\\"photo.jpg\\\",\\n  \\\"media_type\\\": \\\"photo\\\",\\n  \\\"size\\\": 2457600,\\n  \\\"width\\\": 4032,\\n  \\\"height\\\": 3024,\\n  \\\"taken_at\\\": \\\"2026-02-01T14:23:45Z\\\",\\n  \\\"latitude\\\": 34.0195,\\n  \\\"longitude\\\": -118.4912,\\n  \\\"download_url\\\": \\\"/api/v1/media/media-uuid/download\\\",\\n  \\\"thumbnail_url\\\": \\\"/api/v1/media/media-uuid/thumbnail/large\\\",\\n  \\\"metadata\\\": {\\n    \\\"exif\\\": {...},\\n    \\\"tags\\\": [\\\"vacation\\\", \\\"beach\\\"]\\n  },\\n  \\\"created_at\\\": \\\"2026-02-03T12:00:00Z\\\",\\n  \\\"updated_at\\\": \\\"2026-02-03T12:00:00Z\\\"\\n}\\n```\\n\\n**Errors:**\\n- `404 Not Found` - Media ID doesn't exist or user doesn't own it\\n\\n---\\n\\n### Download Media\\n\\nDownload original media file.\\n\\n```http\\nGET /api/v1/media/{media_id}/download\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (200 OK):**\\n```\\nContent-Type: image/jpeg (or appropriate MIME type)\\nContent-Disposition: attachment; filename=\\\"photo.jpg\\\"\\nContent-Length: 2457600\\n\\n(binary data)\\n```\\n\\n**Streaming:** Uses chunked transfer for large files.\\n\\n---\\n\\n### Get Thumbnail\\n\\nGet thumbnail of media.\\n\\n```http\\nGET /api/v1/media/{media_id}/thumbnail/{size}\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Sizes:**\\n- `small` - 150x150px\\n- `medium` - 400x400px\\n- `large` - 800x800px\\n\\n**Response (200 OK):**\\n```\\nContent-Type: image/jpeg\\nContent-Length: 45678\\n\\n(binary data - thumbnail)\\n```\\n\\n**Caching:** Includes `Cache-Control` and `ETag` headers for browser caching.\\n\\n---\\n\\n### Update Media\\n\\nUpdate media metadata.\\n\\n```http\\nPATCH /api/v1/media/{media_id}\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"metadata\\\": {\\n    \\\"description\\\": \\\"Updated description\\\",\\n    \\\"tags\\\": [\\\"vacation\\\", \\\"beach\\\", \\\"sunset\\\"]\\n  }\\n}\\n```\\n\\n**Immutable Fields:**\\n- Cannot change: `filename`, `size`, `hash`, `taken_at` (from EXIF)\\n- Can update: `metadata` (description, tags, etc.)\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"id\\\": \\\"media-uuid\\\",\\n  \\\"metadata\\\": {\\n    \\\"description\\\": \\\"Updated description\\\",\\n    \\\"tags\\\": [\\\"vacation\\\", \\\"beach\\\", \\\"sunset\\\"],\\n    \\\"exif\\\": {...}\\n  },\\n  \\\"updated_at\\\": \\\"2026-02-03T14:00:00Z\\\"\\n}\\n```\\n\\n---\\n\\n### Delete Media\\n\\nSoft delete media (can be restored).\\n\\n```http\\nDELETE /api/v1/media/{media_id}\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (204 No Content)**\\n\\n**Side Effects:**\\n- Sets `deleted_at` timestamp\\n- Deletes all links to/from media\\n- Does NOT delete file immediately (deleted after retention period)\\n- Decrements user's `storage_used` (eventually)\\n\\n---\\n\\n## Album Endpoints\\n\\n### Create Album\\n\\nCreate new album.\\n\\n```http\\nPOST /api/v1/albums\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"name\\\": \\\"Vacation 2026\\\",\\n  \\\"description\\\": \\\"Photos from California trip\\\",\\n  \\\"sort_order\\\": \\\"date_desc\\\"\\n}\\n```\\n\\n**Response (201 Created):**\\n```json\\n{\\n  \\\"id\\\": \\\"album-uuid\\\",\\n  \\\"type\\\": \\\"album\\\",\\n  \\\"name\\\": \\\"Vacation 2026\\\",\\n  \\\"description\\\": \\\"Photos from California trip\\\",\\n  \\\"cover_media_id\\\": null,\\n  \\\"sort_order\\\": \\\"date_desc\\\",\\n  \\\"media_count\\\": 0,\\n  \\\"visibility\\\": \\\"private\\\",\\n  \\\"created_at\\\": \\\"2026-02-03T12:00:00Z\\\",\\n  \\\"metadata\\\": {}\\n}\\n```\\n\\n---\\n\\n### List Albums\\n\\nList user's albums.\\n\\n```http\\nGET /api/v1/albums?limit=50&offset=0\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"items\\\": [\\n    {\\n      \\\"id\\\": \\\"album-1-uuid\\\",\\n      \\\"name\\\": \\\"Vacation 2026\\\",\\n      \\\"media_count\\\": 42,\\n      \\\"cover_media_id\\\": \\\"media-uuid\\\",\\n      \\\"cover_thumbnail_url\\\": \\\"/api/v1/media/media-uuid/thumbnail/medium\\\"\\n    },\\n    {\\n      \\\"id\\\": \\\"album-2-uuid\\\",\\n      \\\"name\\\": \\\"Family Photos\\\",\\n      \\\"media_count\\\": 150\\n    }\\n  ],\\n  \\\"total\\\": 10,\\n  \\\"limit\\\": 50,\\n  \\\"offset\\\": 0\\n}\\n```\\n\\n---\\n\\n### Get Album\\n\\nGet album details.\\n\\n```http\\nGET /api/v1/albums/{album_id}\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"id\\\": \\\"album-uuid\\\",\\n  \\\"name\\\": \\\"Vacation 2026\\\",\\n  \\\"description\\\": \\\"Photos from California trip\\\",\\n  \\\"media_count\\\": 42,\\n  \\\"cover_media_id\\\": \\\"media-uuid\\\",\\n  \\\"created_at\\\": \\\"2026-02-03T12:00:00Z\\\"\\n}\\n```\\n\\n---\\n\\n### Get Album Media\\n\\nGet media in album (convenience endpoint for links).\\n\\n```http\\nGET /api/v1/albums/{album_id}/media?limit=50&offset=0\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"items\\\": [\\n    {\\n      \\\"id\\\": \\\"media-1-uuid\\\",\\n      \\\"filename\\\": \\\"beach.jpg\\\",\\n      \\\"taken_at\\\": \\\"2026-02-01T14:00:00Z\\\",\\n      \\\"thumbnail_url\\\": \\\"...\\\",\\n      \\\"link_id\\\": \\\"link-uuid\\\",  // Link that connects media to album\\n      \\\"sort_order\\\": 0\\n    },\\n    {\\n      \\\"id\\\": \\\"media-2-uuid\\\",\\n      \\\"filename\\\": \\\"sunset.jpg\\\",\\n      \\\"link_id\\\": \\\"link-uuid-2\\\",\\n      \\\"sort_order\\\": 1\\n    }\\n  ],\\n  \\\"total\\\": 42\\n}\\n```\\n\\n---\\n\\n### Add Media to Album\\n\\nAdd media to album (creates link).\\n\\n```http\\nPOST /api/v1/albums/{album_id}/media\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"media_ids\\\": [\\\"media-1-uuid\\\", \\\"media-2-uuid\\\"],\\n  \\\"sort_order\\\": \\\"append\\\"  // or specific positions\\n}\\n```\\n\\n**Response (201 Created):**\\n```json\\n{\\n  \\\"links_created\\\": 2,\\n  \\\"links\\\": [\\n    {\\n      \\\"id\\\": \\\"link-1-uuid\\\",\\n      \\\"from_object_id\\\": \\\"album-uuid\\\",\\n      \\\"to_object_id\\\": \\\"media-1-uuid\\\",\\n      \\\"sort_order\\\": 0\\n    },\\n    {\\n      \\\"id\\\": \\\"link-2-uuid\\\",\\n      \\\"from_object_id\\\": \\\"album-uuid\\\",\\n      \\\"to_object_id\\\": \\\"media-2-uuid\\\",\\n      \\\"sort_order\\\": 1\\n    }\\n  ]\\n}\\n```\\n\\n---\\n\\n### Remove Media from Album\\n\\nRemove media from album (deletes link).\\n\\n```http\\nDELETE /api/v1/albums/{album_id}/media/{media_id}\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (204 No Content)**\\n\\n**Note:** Deletes link but does NOT delete media object.\\n\\n---\\n\\n### Update Album\\n\\nUpdate album properties.\\n\\n```http\\nPATCH /api/v1/albums/{album_id}\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"name\\\": \\\"California Vacation 2026\\\",\\n  \\\"cover_media_id\\\": \\\"media-uuid\\\"\\n}\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"id\\\": \\\"album-uuid\\\",\\n  \\\"name\\\": \\\"California Vacation 2026\\\",\\n  \\\"cover_media_id\\\": \\\"media-uuid\\\",\\n  \\\"updated_at\\\": \\\"2026-02-03T14:00:00Z\\\"\\n}\\n```\\n\\n---\\n\\n### Delete Album\\n\\nDelete album (soft delete).\\n\\n```http\\nDELETE /api/v1/albums/{album_id}\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (204 No Content)**\\n\\n**Side Effects:**\\n- Deletes all links where album is `from_object`\\n- Does NOT delete media in album (only links)\\n\\n---\\n\\n## Integration Endpoints\\n\\n### List Integrations\\n\\nList user's connected integrations.\\n\\n```http\\nGET /api/v1/integrations\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"items\\\": [\\n    {\\n      \\\"id\\\": \\\"integration-uuid\\\",\\n      \\\"integration_type\\\": \\\"instagram\\\",\\n      \\\"integration_name\\\": \\\"@johnsmith\\\",\\n      \\\"status\\\": \\\"connected\\\",\\n      \\\"is_enabled\\\": true,\\n      \\\"last_sync_at\\\": \\\"2026-02-03T10:00:00Z\\\",\\n      \\\"items_synced\\\": 150,\\n      \\\"metadata\\\": {\\n        \\\"username\\\": \\\"johnsmith\\\",\\n        \\\"profile_url\\\": \\\"https://instagram.com/johnsmith\\\"\\n      }\\n    }\\n  ],\\n  \\\"total\\\": 1\\n}\\n```\\n\\n**Note:** `access_token` and `refresh_token` are NEVER returned in responses.\\n\\n---\\n\\n### Connect Integration (OAuth Start)\\n\\nStart OAuth flow for integration.\\n\\n```http\\nGET /api/v1/integrations/{type}/connect\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Example:** `GET /api/v1/integrations/google-photos/connect`\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"auth_url\\\": \\\"https://accounts.google.com/o/oauth2/v2/auth?client_id=...&redirect_uri=...&scope=...\\\",\\n  \\\"state\\\": \\\"random-state-token\\\"\\n}\\n```\\n\\n**Client Flow:**\\n1. Client receives `auth_url`\\n2. Client redirects user to `auth_url`\\n3. User authorizes on external service (Google, Instagram, etc.)\\n4. External service redirects to callback URL with code\\n5. Callback handler exchanges code for tokens and creates Integration object\\n\\n---\\n\\n### OAuth Callback (Internal)\\n\\nHandle OAuth callback from external service.\\n\\n```http\\nGET /api/v1/integrations/{type}/callback?code=abc123&state=xyz789\\n```\\n\\n**Processing:**\\n1. Verify `state` parameter\\n2. Exchange `code` for `access_token` and `refresh_token`\\n3. Get user info from external API\\n4. Create Integration object\\n5. Encrypt and store tokens\\n6. Redirect client to success page\\n\\n**Response:** Redirect to frontend success page\\n\\n---\\n\\n### Sync Integration\\n\\nTrigger sync from integration.\\n\\n```http\\nPOST /api/v1/integrations/{integration_id}/sync\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Request (Optional):**\\n```json\\n{\\n  \\\"full_sync\\\": false,  // false = incremental, true = full re-sync\\n  \\\"limit\\\": 100  // Max items to sync in this batch\\n}\\n```\\n\\n**Response (202 Accepted):**\\n```json\\n{\\n  \\\"status\\\": \\\"syncing\\\",\\n  \\\"job_id\\\": \\\"sync-job-uuid\\\",\\n  \\\"started_at\\\": \\\"2026-02-03T12:00:00Z\\\"\\n}\\n```\\n\\n**Sync Process (Async):**\\n1. Fetch items from external API (paginated)\\n2. For each item:\\n   - Check if already imported (via source link)\\n   - If new, download media and create Media object\\n   - Create Link (media \\u2192 integration)\\n3. Update integration sync state (cursor, last_sync_at)\\n4. Return sync status\\n\\n---\\n\\n### Get Sync Status\\n\\nCheck status of sync job.\\n\\n```http\\nGET /api/v1/integrations/{integration_id}/sync-status\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"status\\\": \\\"complete\\\",  // \\\"pending\\\", \\\"syncing\\\", \\\"complete\\\", \\\"failed\\\"\\n  \\\"started_at\\\": \\\"2026-02-03T12:00:00Z\\\",\\n  \\\"completed_at\\\": \\\"2026-02-03T12:05:00Z\\\",\\n  \\\"items_synced\\\": 25,\\n  \\\"items_skipped\\\": 5,  // Already existed\\n  \\\"items_failed\\\": 0,\\n  \\\"errors\\\": []\\n}\\n```\\n\\n---\\n\\n### Disconnect Integration\\n\\nDisconnect integration (soft delete).\\n\\n```http\\nDELETE /api/v1/integrations/{integration_id}\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (204 No Content)**\\n\\n**Options:**\\n```json\\n{\\n  \\\"delete_media\\\": false  // If true, also delete all media imported from this integration\\n}\\n```\\n\\n**Side Effects:**\\n- Revokes OAuth tokens (calls external API if supported)\\n- Deletes Integration object\\n- Optionally deletes linked Media objects\\n\\n---\\n\\n## Link Endpoints\\n\\n### Create Link\\n\\nCreate relationship between objects.\\n\\n```http\\nPOST /api/v1/links\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"from_object_id\\\": \\\"album-uuid\\\",\\n  \\\"from_object_type\\\": \\\"album\\\",\\n  \\\"to_object_id\\\": \\\"media-uuid\\\",\\n  \\\"to_object_type\\\": \\\"media\\\",\\n  \\\"link_type\\\": \\\"contains\\\",\\n  \\\"sort_order\\\": 0\\n}\\n```\\n\\n**Response (201 Created):**\\n```json\\n{\\n  \\\"id\\\": \\\"link-uuid\\\",\\n  \\\"from_object_id\\\": \\\"album-uuid\\\",\\n  \\\"to_object_id\\\": \\\"media-uuid\\\",\\n  \\\"link_type\\\": \\\"contains\\\",\\n  \\\"strength\\\": 1.0,\\n  \\\"created_at\\\": \\\"2026-02-03T12:00:00Z\\\"\\n}\\n```\\n\\n**Errors:**\\n- `400 Bad Request` - Invalid link type or object combination\\n- `404 Not Found` - from_object or to_object doesn't exist\\n- `409 Conflict` - Link already exists\\n\\n---\\n\\n### List Links\\n\\nList links for an object.\\n\\n```http\\nGET /api/v1/objects/{object_id}/links?direction=outgoing&type=contains\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Query Parameters:**\\n- `direction` - `outgoing` (from object), `incoming` (to object), `both`\\n- `type` - Filter by link type\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"links\\\": [\\n    {\\n      \\\"id\\\": \\\"link-uuid\\\",\\n      \\\"link_type\\\": \\\"contains\\\",\\n      \\\"from_object_id\\\": \\\"album-uuid\\\",\\n      \\\"to_object_id\\\": \\\"media-uuid\\\",\\n      \\\"to_object\\\": {  // Embedded for convenience\\n        \\\"id\\\": \\\"media-uuid\\\",\\n        \\\"type\\\": \\\"media\\\",\\n        \\\"filename\\\": \\\"photo.jpg\\\"\\n      }\\n    }\\n  ],\\n  \\\"total\\\": 1\\n}\\n```\\n\\n---\\n\\n### Update Link\\n\\nUpdate link properties.\\n\\n```http\\nPATCH /api/v1/links/{link_id}\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Request:**\\n```json\\n{\\n  \\\"sort_order\\\": 10,\\n  \\\"strength\\\": 1.0,\\n  \\\"metadata\\\": {\\n    \\\"user_confirmed\\\": true\\n  }\\n}\\n```\\n\\n**Immutable:** Cannot change `from_object_id`, `to_object_id`, `link_type`.\\n\\n---\\n\\n### Delete Link\\n\\nDelete relationship.\\n\\n```http\\nDELETE /api/v1/links/{link_id}\\nAuthorization: Bearer {access_token}\\n```\\n\\n**Response (204 No Content)**\\n\\n---\\n\\n## System Endpoints\\n\\n### Health Check\\n\\nCheck if API is running.\\n\\n```http\\nGET /health\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"status\\\": \\\"healthy\\\",\\n  \\\"version\\\": \\\"0.1.0\\\",\\n  \\\"timestamp\\\": \\\"2026-02-03T12:00:00Z\\\"\\n}\\n```\\n\\n---\\n\\n### Version Info\\n\\nGet API version and capabilities.\\n\\n```http\\nGET /api/v1/version\\n```\\n\\n**Response (200 OK):**\\n```json\\n{\\n  \\\"version\\\": \\\"0.1.0\\\",\\n  \\\"api_version\\\": \\\"v1\\\",\\n  \\\"capabilities\\\": [\\\"media\\\", \\\"albums\\\", \\\"integrations\\\"],\\n  \\\"integrations_available\\\": [\\\"instagram\\\", \\\"google-photos\\\"]\\n}\\n```\\n\\n---\\n\\n### Metrics (Admin Only)\\n\\nPrometheus metrics endpoint.\\n\\n```http\\nGET /metrics\\nAuthorization: Bearer {admin_access_token}\\n```\\n\\n**Response (200 OK):**\\n```\\n# TYPE hypernet_api_requests_total counter\\nhypernet_api_requests_total{method=\\\"GET\\\",endpoint=\\\"/api/v1/media\\\",status=\\\"200\\\"} 1234\\n...\\n```\\n\\n---\\n\\n## Error Responses\\n\\n### Standard Error Format\\n\\nAll errors return RFC 7807 Problem Details:\\n\\n```json\\n{\\n  \\\"type\\\": \\\"https://hypernet.io/errors/validation-error\\\",\\n  \\\"title\\\": \\\"Validation Error\\\",\\n  \\\"status\\\": 400,\\n  \\\"detail\\\": \\\"Invalid email format\\\",\\n  \\\"instance\\\": \\\"/api/v1/auth/register\\\",\\n  \\\"errors\\\": [\\n    {\\n      \\\"field\\\": \\\"email\\\",\\n      \\\"message\\\": \\\"Invalid email format\\\"\\n    }\\n  ]\\n}\\n```\\n\\n### Common Error Types\\n\\n**Validation Error (400):**\\n```json\\n{\\n  \\\"type\\\": \\\"validation-error\\\",\\n  \\\"title\\\": \\\"Validation Error\\\",\\n  \\\"status\\\": 400,\\n  \\\"errors\\\": [\\n    {\\\"field\\\": \\\"email\\\", \\\"message\\\": \\\"Email is required\\\"},\\n    {\\\"field\\\": \\\"password\\\", \\\"message\\\": \\\"Password must be at least 12 characters\\\"}\\n  ]\\n}\\n```\\n\\n**Unauthorized (401):**\\n```json\\n{\\n  \\\"type\\\": \\\"unauthorized\\\",\\n  \\\"title\\\": \\\"Unauthorized\\\",\\n  \\\"status\\\": 401,\\n  \\\"detail\\\": \\\"Invalid or expired token\\\"\\n}\\n```\\n\\n**Forbidden (403):**\\n```json\\n{\\n  \\\"type\\\": \\\"forbidden\\\",\\n  \\\"title\\\": \\\"Forbidden\\\",\\n  \\\"status\\\": 403,\\n  \\\"detail\\\": \\\"You don't have permission to access this resource\\\"\\n}\\n```\\n\\n**Not Found (404):**\\n```json\\n{\\n  \\\"type\\\": \\\"not-found\\\",\\n  \\\"title\\\": \\\"Not Found\\\",\\n  \\\"status\\\": 404,\\n  \\\"detail\\\": \\\"Media object with ID 'abc123' not found\\\"\\n}\\n```\\n\\n**Rate Limited (429):**\\n```json\\n{\\n  \\\"type\\\": \\\"rate-limited\\\",\\n  \\\"title\\\": \\\"Too Many Requests\\\",\\n  \\\"status\\\": 429,\\n  \\\"detail\\\": \\\"Rate limit exceeded. Try again in 60 seconds.\\\",\\n  \\\"retry_after\\\": 60\\n}\\n```\\n\\n---\\n\\n## Next Steps\\n\\n- [ ] Review API endpoints\\n- [ ] Generate OpenAPI/Swagger spec (auto-generated from FastAPI)\\n- [ ] Implement endpoint handlers in FastAPI\\n- [ ] Write integration tests for each endpoint\\n- [ ] Add rate limiting middleware\\n- [ ] Set up API documentation UI (Swagger/ReDoc)\\n\\n---\\n\\n**Status:** Draft - Ready for implementation\\n**Next:** Database schema design and implementation\\n\"\n  },\n  \"created_at\": \"2026-02-15T11:53:48.186554+00:00\",\n  \"updated_at\": \"2026-02-15T11:53:48.186554+00:00\",\n  \"deleted_at\": null,\n  \"source_type\": \"import\",\n  \"source_id\": \"file:03-API-Endpoints.md\"\n}"
  },
  "created_at": "2026-02-15T11:53:54.597198+00:00",
  "updated_at": "2026-02-15T11:53:54.597198+00:00",
  "deleted_at": null,
  "source_type": "import",
  "source_id": "file:node.json"
}