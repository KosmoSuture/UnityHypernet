{
  "address": "0.1.1.13",
  "type_address": null,
  "data": {
    "name": "tests",
    "type": "folder",
    "path": "C:\\Hypernet\\Hypernet Structure\\0\\0.1 - Hypernet Core\\0.1.1 - Core System\\tests",
    "content_preview": "# Test Suite\n\n**Purpose:** Automated tests for Hypernet Core application\n\n**Status:** Active development\n\n**Target Coverage:** 70%+ code coverage\n\n---\n\n## Overview\n\nThis directory contains all automated tests for Hypernet Core 0.1. We follow a comprehensive testing strategy covering unit tests, integration tests, and end-to-end tests to ensure code quality, prevent regressions, and enable confident refactoring.\n\n---\n\n## Testing Philosophy\n\n### Why We Test\n\n1. **Prevent Regressions:** Catch bugs before they reach production\n2. **Enable Refactoring:** Change code confidently without breaking functionality\n3. **Document Behavior:** Tests serve as executable documentation\n4. **Design Feedback:** Hard-to-test code is often poorly designed\n5. **Faster Development:** Automated tests faster than manual testing\n\n### Testing Pyramid\n\n```\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502  E2E Tests  \u2502  <- Few, slow, test full system\n        \u2502   (5-10%)   \u2502\n        \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n        \u2502 Integration \u2502  <- Medium number, test component interaction\n        \u2502   (20-30%)  \u2502\n        \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n        \u2502 Unit Tests  \u2502  <- Many, fast, test individual functions\n        \u2502  (60-75%)   \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n\n**Bottom-heavy pyramid:** Most tests are fast unit tests, fewer slow E2E tests.\n\n---\n\n## Directory Structure\n\n```\ntests/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 conftest.py                 # Pytest fixtures and configuration\n\u251c\u2500\u2500 README.md                   # This file\n\u2502\n\u251c\u2500\u2500 unit/                       # Unit tests (fast, isolated)\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 test_models/           # Test ORM models\n\u2502   \u2502   \u251c\u2500\u2500 test_user.py\n\u2502   \u2502   \u251c\u2500\u2500 test_media.py\n\u2502   \u2502   \u251c\u2500\u2500 test_album.py\n\u2502   \u2502   \u251c\u2500\u2500 test_integration.py\n\u2502   \u2502   \u2514\u2500\u2500 test_link.py\n\u2502   \u251c\u2500\u2500 test_services/         # Test business logic\n\u2502   \u2502   \u251c\u2500\u2500 test_auth_service.py\n\u2502   \u2502   \u251c\u2500\u2500 test_user_service.py\n\u2502   \u2502   \u251c\u2500\u2500 test_media_service.py\n\u2502   \u2502   \u251c\u2500\u2500 test_album_service.py\n\u2502   \u2502   \u251c\u2500\u2500 test_integration_service.py\n\u2502   \u2502   \u2514\u2500\u2500 test_link_service.py\n\u2502   \u2514\u2500\u2500 test_utils/            # Test utility functions\n\u2502       \u251c\u2500\u2500 test_security.py\n\u2502       \u251c\u2500\u2500 test_validation.py\n\u2502       \u2514\u2500\u2500 test_file_utils.py\n\u2502\n\u251c\u2500\u2500 integration/               # Integration tests (medium speed)\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 test_api/             # Test API endpoints\n\u2502   \u2502   \u251c\u2500\u2500 test_auth_routes.py\n\u2502   \u2502   \u251c\u2500\u2500 test_user_routes.py\n\u2502   \u2502   \u251c\u2500\u2500 test_media_routes.py\n\u2502   \u2502   \u251c\u2500\u2500 test_album_routes.py\n\u2502   \u2502   \u2514\u2500\u2500 test_integration_routes.py\n\u2502   \u251c\u2500\u2500 test_database/        # Test database operations\n\u2502   \u2502   \u251c\u2500\u2500 test_migrations.py\n\u2502   \u2502   \u251c\u2500\u2500 test_queries.py\n\u2502   \u2502   \u2514\u2500\u2500 test_transactions.py\n\u2502   \u2514\u2500\u2500 test_integrations/    # Test external integrations\n\u2502       \u251c\u2500\u2500 test_instagram.py\n\u2502       \u2514\u2500\u2500 test_google_photos.py\n\u2502\n\u251c\u2500\u2500 e2e/                      # End-to-end tests (slow)\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 test_user_flows.py    # Complete user workflows\n\u2502   \u251c\u2500\u2500 test_media_flows.py\n\u2502   \u2514\u2500\u2500 test_sync_flows.py\n\u2502\n\u251c\u2500\u2500 security/                 # Security tests\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 test_authentication.py\n\u2502   \u251c\u2500\u2500 test_authorization.py\n\u2502   \u251c\u2500\u2500 test_input_validation.py\n\u2502   \u2514\u2500\u2500 test_injection_prevention.py\n\u2502\n\u251c\u2500\u2500 performance/              # Performance tests\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 test_api_performance.py\n\u2502   \u2514\u2500\u2500 test_query_performance.py\n\u2502\n\u2514\u2500\u2500 fixtures/                 # Test data and fixtures\n    \u251c\u2500\u2500 sample_media/\n    \u2502   \u251c\u2500\u2500 test_photo.jpg\n    \u2502   \u251c\u2500\u2500 test_video.mp4\n    \u2502   \u2514\u2500\u2500 test_document.pdf\n    \u2514\u2500\u2500 sample_data.json\n```\n\n---\n\n## Test Types\n\n### 1. Unit Tests (`tests/unit/`)\n\n**Purpose:** Test individual functions/methods in isolation\n\n**Characteristics:**\n- Fast (milliseconds)\n- No external dependencies (mock database, network)\n- Test one thing at a time\n- Run frequently during development\n\n**Example:**\n\n```python\n# tests/unit/test_services/test_album_service.py\nimport pytest\nfrom unittest.mock import Mock\nfrom app.services.album_service import AlbumService\nfrom app.services.exceptions import ValidationError\n\ndef test_create_album_success():\n    \"\"\"Test creating album with valid data.\"\"\"\n    # Arrange\n    db_mock = Mock()\n    service = AlbumService(db_mock)\n\n    # Act\n    album = service.create_album(\n        user_id=uuid4(),\n        name=\"Test Album\",\n        description=\"Test Description\"\n    )\n\n    # Assert\n    assert album.name == \"Test Album\"\n    assert album.media_count == 0\n    db_mock.add.assert_called_once()\n    db_mock.commit.assert_called_once()\n\ndef test_create_album_empty_name():\n    \"\"\"Test creating album with empty name fails.\"\"\"\n    db_mock = Mock()\n    service = AlbumService(db_mock)\n\n    with pytest.raises(ValidationError, match=\"name cannot be empty\"):\n        service.create_album(user_id=uuid4(), name=\"\")\n```\n\n### 2. Integration Tests (`tests/integration/`)\n\n**Purpose:** Test component interactions (API + Database, Service + Model)\n\n**Characteristics:**\n- Medium speed (seconds)\n- Use real database (test database)\n- Test multiple components together\n- Run before commits/PRs\n\n**Example:**\n\n```python\n# tests/integration/test_api/test_album_routes.py\nfrom fastapi.testclient import TestClient\nfrom app.main import app\n\nclient = TestClient(app)\n\ndef test_create_album_api(test_db, auth_headers):\n    \"\"\"Test album creation via API.\"\"\"\n    # Act\n    response = client.post(\n        \"/api/v1/albums\",\n        json={\"name\": \"Vacation 2026\", \"description\": \"Summer trip\"},\n        headers=auth_headers\n    )\n\n    # Assert\n    assert response.status_code == 201\n    data = response.json()\n    assert data[\"name\"] == \"Vacation 2026\"\n    assert data[\"media_count\"] == 0\n    assert \"id\" in data\n\ndef test_create_album_unauthorized(test_db):\n    \"\"\"Test album creation without auth fails.\"\"\"\n    response = client.post(\n        \"/api/v1/albums\",\n        json={\"name\": \"Test\"}\n    )\n    assert response.status_code == 401\n```\n\n### 3. End-to-End Tests (`tests/e2e/`)\n\n**Purpose:** Test complete user workflows from start to finish\n\n**Characteristics:**\n- Slow (seconds to minutes)\n- Test entire system\n- Simulate real user behavior\n- Run before releases\n\n**Example:**\n\n```python\n# tests/e2e/test_media_flows.py\ndef test_complete_photo_upload_workflow(test_db, auth_headers):\n    \"\"\"\n    Test complete workflow:\n    1. Register user\n    2. Login\n    3. Create album\n    4. Upload photo\n    5. Add photo to album\n    6. Retrieve album with photos\n    \"\"\"\n    # 1. Register\n    register_response = client.post(\n        \"/api/v1/auth/register\",\n        json={\"email\": \"test@example.com\", \"password\": \"SecurePass123!\"}\n    )\n    assert register_response.status_code == 201\n\n    # 2. Login\n    login_response = client.post(\n        \"/api/v1/auth/login\",\n        json={\"email\": \"test@example.com\", \"password\": \"SecurePass123!\"}\n    )\n    token = login_response.json()[\"access_token\"]\n    headers = {\"Authorization\": f\"Bearer {token}\"}\n\n    # 3. Create album\n    album_response = client.post(\n        \"/api/v1/albums\",\n        json={\"name\": \"Test Album\"},\n        headers=headers\n    )\n    album_id = album_response.json()[\"id\"]\n\n    # 4. Upload photo\n    with open(\"tests/fixtures/sample_media/test_photo.jpg\", \"rb\") as f:\n        upload_response = client.post(\n            \"/api/v1/media/upload\",\n            files={\"file\": f},\n            headers=headers\n        )\n    media_id = upload_response.json()[\"id\"]\n\n    # 5. Add to album\n    add_response = client.post(\n        f\"/api/v1/albums/{album_id}/media\",\n        json={\"media_id\": media_id},\n        headers=headers\n    )\n    assert add_response.status_code == 201\n\n    # 6. Retrieve album\n    get_response = client.get(f\"/api/v1/albums/{album_id}\", headers=headers)\n    assert get_response.json()[\"media_count\"] == 1\n```\n\n### 4. Security Tests (`tests/security/`)\n\n**Purpose:** Verify security controls and prevent vulnerabilities\n\n**Example:**\n\n```python\n# tests/security/test_injection_prevention.py\ndef test_sql_injection_prevention(test_db, auth_headers):\n    \"\"\"Test that SQL injection attempts are blocked.\"\"\"\n    # Try SQL injection in search parameter\n    response = client.get(\n        \"/api/v1/media?search=' OR '1'='1\",\n        headers=auth_headers\n    )\n    # Should not return all media, should be empty or error\n    assert response.status_code in [200, 400]\n    if response.status_code == 200:\n        # Injection should have no effect\n        assert len(response.json()[\"items\"]) == 0\n\ndef test_path_traversal_prevention(test_db, auth_headers):\n    \"\"\"Test that path traversal attempts are blocked.\"\"\"\n    response = client.get(\n        \"/api/v1/media/../../etc/passwd\",\n        headers=auth_headers\n    )\n    assert response.status_code == 400  # Bad request, not file contents\n```\n\n### 5. Performance Tests (`tests/performance/`)\n\n**Purpose:** Ensure performance meets requirements\n\n**Example:**\n\n```python\n# tests/performance/test_api_performance.py\nimport time\n\ndef test_media_list_performance(test_db, auth_headers, test_media_100):\n    \"\"\"Test that listing media is fast enough.\"\"\"\n    start = time.time()\n\n    response = client.get(\n        \"/api/v1/media?limit=50\",\n        headers=auth_headers\n    )\n\n    elapsed = time.time() - start\n\n    assert response.status_code == 200\n    assert elapsed < 0.5  # Should complete in < 500ms\n```\n\n---\n\n## Running Tests\n\n### All Tests\n\n```bash\n# Run all tests\npytest\n\n# Run with coverage\npytest --cov=app --cov-report=html\n\n# Run with verbose output\npytest -v\n```\n\n### Specific Test Types\n\n```bash\n# Unit tests only (fast)\npytest tests/unit/\n\n# Integration tests only\npytest tests/integration/\n\n# E2E tests only (slow)\npytest tests/e2e/\n\n# Security tests\npytest tests/security/\n```\n\n### Specific Test Files\n\n```bash\n# Single file\npytest tests/unit/test_services/test_album_service.py\n\n# Single test function\npytest tests/unit/test_services/test_album_service.py::test_create_album_success\n\n# Tests matching pattern\npytest -k \"album\"\n```\n\n### Watch Mode\n\n```bash\n# Re-run tests on file changes (requires pytest-watch)\nptw\n```\n\n---\n\n## Test Fixtures\n\nFixtures provide reusable test data and setup.\n\n### Common Fixtures (`conftest.py`)\n\n```python\n# tes\n... [truncated]",
    "content_file": "README.md"
  },
  "created_at": "2026-02-17T01:21:59.113710+00:00",
  "updated_at": "2026-02-17T01:21:59.113710+00:00",
  "deleted_at": null,
  "source_type": "import",
  "source_id": "folder:tests"
}